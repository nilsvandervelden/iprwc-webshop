import { Injectable } from "@angular/core";
import { Subject } from 'rxjs';
import { ShoppingListService } from '../shopping-list/shopping-list.service';
import { Product } from './product-model';


@Injectable()
export class ProductService {
  productChanged = new Subject<Product[]>();

  private products: Product[] = [
    new Product(
      'Sybil Trelawney Vinylfiguur 86',
      13.99,
      'Potter, Funko Pop!',
      'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTYfWkMre0uf7-foxGpeaGQqDl7XcmolVOI_kucAoJp9oqwyIve5Jl4Ex_xGyQ&usqp=CAc'
    ),
    new Product(
      'Sybil Trelawney Vinylfiguur 86',
      13.99,
      'Potter, Funko Pop!',
      'data:image/jpeg;base64,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'
    )
  ];

  constructor(private shoppingListService: ShoppingListService) {

  }

  getProducts() {
    return this.products.slice();
  }

  getProduct(index: number) {
    return this.products[index];
  }

  addProductToShoppingList(product: Product) {
    this.shoppingListService.addProduct(product);
  }

  addProduct(product: Product) {
    this.products.push(product);
    this.productChanged.next(this.products.slice());
  }

  updateProduct(index: number, newProduct: Product) {
    this.products[index] = newProduct;
    this.productChanged.next(this.products.slice());
  }
  
  deleteProduct(index: number) {
    this.products.slice(index, 1);
    this.productChanged.next(this.products.slice());
  }
}